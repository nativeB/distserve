!function(t){window.Hadia=((t,e)=>{try{switch(t){case"start":n&&(e?f(e)||w(e):window.userProps&&"object"==typeof window.userProps&&w(window.userProps),"interactive"===document.readyState||"complete"===document.readyState?u():addEventListener("DOMContentLoaded",u),d("from manual"));break;case"userProps":try{if(!e)return;if(f(r))r=y(e);else{let t=y(e);Object.keys(t).forEach(e=>{r[e]=t[e]})}h(s,{customUserProps:r,trigger:"setUser"})}catch(t){console.error(t)}break;case"stop":Array.prototype.forEach.call(document.querySelectorAll(".basin_voice"),t=>{t.remove()});break;case"hide":Array.prototype.forEach.call(document.querySelectorAll(".basin_voice"),t=>{t.style.display="none"});break;case"show":Array.prototype.forEach.call(document.querySelectorAll(".basin_voice"),t=>{t.style.display="block"});break;default:console.error('No event parameter found or unknown event parameter.Did you mean to use the "start" event ?')}}catch(t){console.error(t)}});const e=document.currentScript.getAttribute("hadia_id"),n=document.currentScript.hasAttribute("manual"),o=["icon","mainchat","notify"],i=window.location.port?`${window.location.protocol}//${window.location.hostname}:${window.location.port}`:"file:"!==window.location.protocol?`${window.location.protocol}//${window.location.hostname}`:"*",a=window.location.href;debug=!1,resourceurl=debug?"dist/":"https://cdn.jsdelivr.net/gh/nativeB/distserve/assets/",js=`${resourceurl}js/`,css=`${resourceurl}css/`;let r={},s=[],c=!1,p=JSON.parse(localStorage.getItem("hadia-currentUser"))||"";function d(t){debug&&console.log(t)}function l(t){let n=document.createElement("iframe");n.src="about:blank",n.id=`${t}_voice`,n.sandbox="allow-same-origin allow-scripts allow-pointer-lock";let o=document.createTextNode(`\n        let hadia_live_api='https://hadia-backend.herokuapp.com/'\n        let debug=${debug}\n        if(debug)\n        hadia_live_api='http://localhost:3200/'\n        let listenTo='${i}'\n        let page_id='${e}'\n        let user_id= '${p}'\n        let current_page= '${a}'\n        function appender(url){\n            if(typeof url==='object') {\n                if(url.script.endsWith('.js')) {\n                    let script = document.createElement('script')\n                    script.src = url.script\n                    script.type = 'text/javascript'\n                    if (url.state) {\n                        if(url.state==='defer') {\n                            script.defer = true\n                        }\n                        script.async=false\n                    }\n                    document.body.insertAdjacentElement('beforeEnd', script)\n                }\n            }\n            else if(url.endsWith('.css')) {\n                let link = document.createElement('link')\n                link.href = url\n                link.type = 'text/css'\n                link.rel = 'stylesheet'\n                document.head.insertAdjacentElement('beforeEnd', link)\n            }\n        \n        }\n        let check = '${t}'\n        if(check==='mainchat'){\n            ['${css}chat.style.css',\n                 'https://use.fontawesome.com/releases/v5.6.3/css/all.css',\n                 {script:'${js}components/main.js',state:'sync'},\n                {script:'http://cdn.agora.io/sdk/web/AgoraRTCSDK-2.5.0.js',state:'sync'},\n                {script:'https://js.pusher.com/4.3/pusher.min.js',state:'sync'},\n                {script:'${js}agora_init.js',state:'sync'},\n                \n            ].forEach(url=>{\n                appender(url)\n            })\n        }else if(check==='icon'){\n            ['${css}icon.style.css',\n                {script: '${js}components/icon_main.js',state:''}\n            ].forEach(url=>{\n                appender(url)\n            })\n        }else if(check==='notify'){\n            ['${css}notify.style.css',\n                'https://use.fontawesome.com/releases/v5.6.3/css/all.css',\n                {script: '${js}components/notify.js',state:''}\n            ].forEach(url=>{\n                appender(url)\n            })\n        }`),r=document.createElement("script");r.type="text/javascript",r.appendChild(o),n.onload=function(){try{(n.contentDocument||n.contentWindow.document).body.appendChild(r)}catch(t){console.log(t)}};let s=document.createElement("div");s.className="basin_voice",s.appendChild(n),document.body.insertAdjacentElement("beforeEnd",s)}function m(){!function(){let t=document.createElement("style");t.className="basin_voice",t.appendChild(document.createTextNode(`\n        #${o[0]}_voice{position:fixed !important;bottom:0!important;\n        right:20px!important;z-index: 2147483647!important;border:none!important;visibility:visible!important;height:90px !important;max-width:70px!important;min-width:70px!important;}\n        #${o[1]}_voice{display:none; max-width: 300px !important;min-width: 300px !important;border: none!important;  width: 200px!important; height: 50% !important; border-radius: 9pt!important; bottom: 73pt!important; padding: 0px!important; position: fixed!important; right: 20px!important;   z-index: 2147483647!important; max-height: 100%!important;box-shadow:2px 10px 40px rgba(90, 89, 88, 0.4)!important;}\n        @media (max-width: 450px) {\n        #${o[1]}_voice{border: none;width: 100%!important;border-radius: 9pt!important;bottom: 73pt!important;padding: 0px!important;position: fixed!important;right: 0px!important;z-index: 2147483647!important;max-height: 100%!important;height: calc(100% - 100px) !important;max-width:100% !important;min-width:100% !important;}\n        }\n        #${o[2]}_voice{display:none;outline: none !important; visibility: visible !important; resize: none !important; box-shadow: none !important; overflow: visible !important; background: none transparent !important; opacity: 1 !important; position: fixed !important; border: 0px !important; min-height: auto !important; min-width: auto !important; max-height: none !important; max-width: none !important; padding: 0px !important; margin: 0px !important; transition-property: none !important; transform: none !important; width: 378px !important; z-index: 2147483647!important; cursor: auto !important; float: none !important; border-radius: unset !important; bottom: 100px !important; top: auto !important; right: 10px !important; left: auto !important;height:100px;`)),document.head.insertAdjacentElement("beforeEnd",t)}(),l("icon")}function u(){c?console.error("There is an instance of fam livechat already running.add the manual attribute to the fam script tag if you don't want fam to start automatically"):(console.log("sdsdss"),function(){let t=window.addEventListener?"addEventListener":"attachEvent";(0,window[t])("attachEvent"===t?"onmessage":"message",function(t){let e=t.data.trigger;var n,o,a;"online"===e?(s.push(t.data.component),d(s),t.data.listenTo=i,h(s,t.data),d("hello",t.data.component),f(r)||h(t.data.component,{customUserProps:r,trigger:"setUser"})):"init_chat"===e?(l("notify"),l("mainchat")):"open"===e||"close"===e||"open-notify"===e?s.includes(t.data.component)?function(t,e){try{return"open"===e?(document.querySelector(`#${t}_voice`).style.display="block",!0):"close"===e?(document.querySelector(`#${t}_voice`).style.display="none",!0):"open-notify"===e&&(document.querySelector(`#${t}_voice`).style.display="block",!0)}catch(t){return!1}}(t.data.component,e)&&h(s,t.data):d(t):"changeCss"===e?(o=t.data.component,a=t.data.props,d("changing prop 1"),document.querySelector(`#${o}_voice`).style[a.key]=a.value):"setUserId"===e?(n=t.data.user_id,p=n):h(s,t.data),d(s)},!1)}(),m(),c=!0)}function h(t,e){"object"==typeof t?t.forEach(t=>{document.querySelector(`#${t}_voice`).contentWindow.postMessage(e,"*")}):document.querySelector(`#${t}_voice`).contentWindow.postMessage(e,"*")}function f(t){for(let e in t)if(t.hasOwnProperty(e))return!1;return!0}function y(t){let e=(({name:t,first_name:e,last_name:n,email:o,phone_number:i,signed_up:a,browser_language:r,last_seen:s,first_seen:c})=>({name:t,first_name:e,last_name:n,email:o,phone_number:i,signed_up:a,browser_language:r,last_seen:s,first_seen:c}))(t);return Object.keys(e).forEach(t=>{e[t]||delete e[t]}),e}function w(t){r=y(t),d(y(t))}n||(e?(window.userProps&&"object"==typeof window.userProps&&w(window.userProps),addEventListener("DOMContentLoaded",u)):d("No page id provided"))}();